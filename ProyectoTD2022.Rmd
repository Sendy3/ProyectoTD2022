---
# Ver https://bookdown.org/yihui/rmarkdown/ 
title: "Mini Proyecto 2022. Contaminación acústica en el barrio de Ruzafa"
subtitle: Tratamiento de Datos. Grado en Ciencia de Datos- UV
author: "Sandra Paniagua Sanchez, "
date:  "`r Sys.Date()`"  #Pondría la fecha del día actual
params:
  lang: ES
lang: "`r switch(params$lang, ES = 'es-ES', EN = 'en-US')`"
output:
  pdf_document: default
  word_document: default
  html_document: default
---

\bigskip

\bigskip

\noindent\makebox[\linewidth]{\rule{\textwidth}{0.4pt}}

\bigskip

\tableofcontents

\bigskip

\noindent\makebox[\linewidth]{\rule{\textwidth}{0.4pt}}


\newpage

# Informacion de la plantilla que luego borraremos
Configuración del los bloques (*Chunks*)

Cada bloque tiene muchos parámetros que pueden ser configurados

**include** = **FALSE** evita que el código y los resultados aparezcan en el archivo terminado. R Markdown aún ejecuta el código en el fragmento y los resultados pueden ser utilizados por otros fragmentos.

**echo = FALSE** evita que el código, pero no los resultados, aparezcan en el archivo terminado. Esta es una manera útil de incrustar figuras.

**message = FALSE** evita que los mensajes generados por el código aparezcan en el archivo finalizado.

**warning = FALSE** evita que las advertencias generadas por el código aparezcan en el final.

**fig.cap = "..."** agrega un título a los resultados gráficos.

Se pueden especificicar opciones generales por defecto en *opts_chunk\$set*

Más opciones en el enlace [\<https://bookdown.org/yihui/rmarkdown/\>](https://bookdown.org/yihui/rmarkdown/){.uri}

```{r setup, cache = F, echo = F, message = F, warning = F, tidy = F}


# CONFIGURACIÓN GENERAL
library(knitr)
options(width = 100)

# Opciones generales de los chucks. Se utilizarán salvo cambios en el chunk
opts_chunk$set(echo=F, message = F, error = F, warning = F, comment = NA, fig.align = 'center', dpi = 200, tidy = F, cache.path = '.cache/', fig.path = './figura/')

# Opciones generales de dígitos cuando se incluyen tablas
#options(xtable.type = 'html')
knit_hooks$set(inline = function(x) {
  
  if(is.numeric(x)) {
    round(x, getOption('digits'))
  } else {
    paste(as.character(x), collapse = ', ')
  }
})
#knit_hooks$set(plot = knitr:::hook_plot_html)
```

Instalación automática de paquetes


```{r include= F}

# Especificamos las librerías necesarias en esta lista

packages = c("tidyverse","knitr")

#use this function to check if each package is on the local machine
#if a package is installed, it will be loaded
#if any are not, the missing package(s) will be installed and loaded
package.check <- lapply(packages, FUN = function(x) {
  if (!require(x, character.only = TRUE)) {
    install.packages(x, dependencies = TRUE,repos='http://cran.rediris.es')
  }
  library(x, character.only = TRUE)
})

#verify they are loaded
search()

```

# Introducción del trabajo

El objetivo de este trabajo es ... bla bla bla 

# Importacion de datos

```{r}
library(readr)
filename <- "data/Ruzafa1.csv"
download.file(url='https://opendata.vlci.valencia.es/datastore/dump/a54fb175-8013-460a-a2f0-22de7a210d7a?format=csv&bom=true', destfile = filename)
Ruzafa1 <- read.csv(filename)
#save(file= filename, Ruzafa1)


filename <- "data/Cadiz16.csv"
download.file(url="https://opendata.vlci.valencia.es/datastore/dump/75a878a9-2bd9-4619-98ec-3224be867c65?format=csv&bom=true", destfile = filename)
Cadiz16 <- read_csv(filename)

filename <- "data/Cadiz3.csv"
download.file(url="https://opendata.vlci.valencia.es/datastore/dump/6fa5210b-f9c7-47c8-9d1f-ddb7568f62de?format=csv&bom=true", destfile = filename)
Cadiz3 <- read_csv(filename)

filename <- "data/Cuba3.csv"
download.file(url="https://opendata.vlci.valencia.es/datastore/dump/5a050cef-1107-4b3b-8e61-5daf5cfb2ca4?format=csv&bom=true", destfile = filename)
Cuba3 <- read_csv(filename)

filename <- "data/Sueca2.csv"
download.file(url="https://opendata.vlci.valencia.es/datastore/dump/e580f492-a2f6-4305-af24-f4c4d05b911c?format=csv&bom=true", destfile = filename)
Sueca2 <- read_csv(filename)

filename <- "data/Sueca61.csv"
download.file(url="https://opendata.vlci.valencia.es/datastore/dump/8058f1a5-c605-4baa-afff-2f638efb767f?format=csv&bom=true", destfile = filename)
Sueca61 <- read_csv(filename)

filename <- "data/Sueca32.csv"
download.file(url="https://opendata.vlci.valencia.es/datastore/dump/d842601d-35b4-4b88-96f7-42e8f68e1b74?format=csv&bom=true", destfile = filename)
Sueca32 <- read_csv(filename)

filename <- "data/Maria.csv"
download.file(url="https://opendata.vlci.valencia.es/datastore/dump/ea008906-e06a-4c72-9fe6-3238e212aae4?format=csv&bom=true", destfile = filename)
Maria <- read_csv(filename)

filename <- "data/Serrano.csv"
download.file(url="https://opendata.vlci.valencia.es/datastore/dump/64e4b7b4-e633-4753-b0ef-a57d785076f8?format=csv&bom=true", destfile = filename)
Serrano <- read_csv(filename)

filename <- "data/Cadiz.csv"
download.file(url="https://opendata.vlci.valencia.es/datastore/dump/ff8678b6-748e-4908-ab5b-9c7ff567da61?format=csv&bom=true", destfile = filename)
Cadiz <- read_csv(filename)

filename <- "data/Cervera34.csv"
download.file(url="https://opendata.vlci.valencia.es/datastore/dump/b26d42ae-2be9-481a-9b79-71392d9e80bd?format=csv&bom=true", destfile = filename)
Cervera34 <- read_csv(filename)

filename <- "data/Rico21.csv"
download.file(url="https://opendata.vlci.valencia.es/datastore/dump/1b41d86b-3939-488b-9035-92d851245924?format=csv&bom=true", destfile = filename)
Rico21 <- read_csv(filename)

filename <- "data/Serrano21.csv"
download.file(url="https://opendata.vlci.valencia.es/datastore/dump/784f4732-abc5-41b1-857b-42decb306643?format=csv&bom=true", destfile = filename)
Serrano21 <- read_csv(filename)

filename <- "data/Cortes.csv"
download.file(url="https://opendata.vlci.valencia.es/datastore/dump/3b2fe345-08fc-49d7-85c8-8cccf6a7e814?format=csv&bom=true", destfile = filename)
Cortes <- read_csv(filename)

```
Para comprobar que todos tienen el mismo numero de columnas y similar numero de observaciones hacemos un bucle for de la lista de archivos a observar.

```{r}

archivos <- list(Ruzafa1, Cadiz16, Cadiz, Cadiz3, Cervera34, Cortes, Maria, Rico21, Ruzafa2, Serrano, Serrano21, Sueca2, Sueca32, Sueca61)

for (i in archivos){
  print(dim(i))
  
}
```




